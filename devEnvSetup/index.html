



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.1">
    
    
      
        <title>Setup - FS-i6 SilverLite</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.30686662.css">
      
      
    
    
      <script src="../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#setting-up-your-development-environment" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href=".." title="FS-i6 SilverLite" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              FS-i6 SilverLite
            </span>
            <span class="md-header-nav__topic">
              
                Setup
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href=".." title="FS-i6 SilverLite" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    FS-i6 SilverLite
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
    <a href="./" title="Setup" class="md-nav__link md-nav__link--active">
      Setup
    </a>
    
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="setting-up-your-development-environment">Setting up your development environment</h1>
<p>This page will walk you through the steps of setting up your development environment so that you can build and deploy this project onto your FlySky FS-i6 transmitter.</p>
<p>It should be possible to develop on Mac OS, Linux and Windows platforms. This is due to using a variety of open source tools and technologies that are supported on all of these operating systems.</p>
<blockquote>
<p>Note: The specific examples provided here will often be written from the perspective of using a Windows development PC. I hope to update this document in the future to provide more specific examples for Mac OS and Linux platforms.</p>
</blockquote>
<h1 id="developing-with-vscode">Developing with VSCode</h1>
<p>I really like Visual Studio Code. It's readily available for Mac OS, Windows and Linux. Plus it's very fast and extensible!</p>
<p>It can be an excellent (and lightweight) development envrironment for embedded devices. I've used it with great success when
developing for ESP8266, ESP32, Arduino (AVR), STM32, etc.</p>
<p>I'll describe how to set up VSCode and associated tools so that we can develop for the (ARM cortex m0+ based) Kinetis KL16 micro used
on the FlySky FS-i6 transmitter.</p>
<blockquote>
<p>Note: Some of what is described here was learned from this (most excellent) article: <a href="https://hbfsrobotics.com/blog/configuring-vs-code-arm-development-stm32cubemx">"Using Visual Studio Code with STM32CubeMX for ARM Development"</a>. It's worth the time to read it for yourself.</p>
</blockquote>
<h1 id="what-well-need">What we'll need</h1>
<p>Here are the list of software tools we'll need for this project.</p>
<ul>
<li><a href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads">ARM gnu toolchain</a></li>
<li><a href="https://sourceforge.net/projects/mingw-w64/">mingw-w64</a> (if you will be developing under Windows)<ul>
<li>This is needed solely for the <code>make</code> tool, or more specifically <code>mingw32-make.exe</code></li>
</ul>
</li>
<li><a href="https://gnutoolchains.com/arm-eabi/openocd/">OpenOCD</a></li>
<li><a href="https://code.visualstudio.com/">Visual Studio Code</a>, and the following extensions:<ul>
<li><a href="https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug">Cortex Debug</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools">C/C++ for Visual Studio Code</a></li>
<li><a href="https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager">Project Manager</a></li>
</ul>
</li>
</ul>
<blockquote>
<p>Note: I've tried using the <a href="https://www.st.com/en/development-tools/stsw-link004.html">STM32 ST-LINK utility</a> as well as the open source version from <a href="https://github.com/texane/stlink">texane</a> but was not able to establish a connection using the ST-Link V2 debugger/programmer I have. Thankfully I was able to get OpenOCD working.</p>
</blockquote>
<p>You will also need some hardware in order to connect your development PC to your FlySky FS-i6 transmitter. I'm using a (cheapie clone) ST-Link V2 programmer/debugger
purchased from <a href="https://www.amazon.com/gp/product/B01EE4WAC8/&gt;">Amazon</a> but also readily available on <a href="https://www.ebay.com/">ebay</a>. </p>
<p>While working on a previous development project I had installed the "ST-Link Utility" from here:
<a href="https://www.st.com/en/development-tools/stsw-link004.html">https://www.st.com/en/development-tools/stsw-link004.html</a></p>
<p>I'm pretty sure that's how I ended up getting the st-link drivers installed onto my Windows 10 development machine. I also ended up updating
the firmware on my ST-Link V2 probe using that utility but I'm not sure if that was necessary. I'm noting it here in case it may be useful.</p>
<p>If you don't already have drivers installed for your ST-Link V2 probe, you may be able to use the drivers provided by the OpenOCD installation (described later).</p>
<h2 id="installing-the-tools">Installing the tools</h2>
<p>If you don't already have VScode installed on your machine please visit:
<a href="https://code.visualstudio.com/">https://code.visualstudio.com/</a></p>
<p>Follow the install directions. Afterwards we'll need to install some extensions
and also configure VSCode slightly.</p>
<p>After installing Visual Studio Code, launch it and navigate to Extensions tab or press <code>Ctrl+Shift+X</code>.</p>
<p>Install the following extensions:</p>
<ul>
<li>C/C++ – <a href="https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools">https://marketplace.visualstudio.com/items?itemName=ms-vscode.cpptools</a></li>
<li>Cortex Debug – <a href="https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug">https://marketplace.visualstudio.com/items?itemName=marus25.cortex-debug</a></li>
<li>Project Manager – <a href="https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager">https://marketplace.visualstudio.com/items?itemName=alefragnani.project-manager</a></li>
</ul>
<p>Press <code>F1</code> key and type <code>open settings json</code>. Select <code>Open Settings (JSON)</code>. In the opened file, insert the following property at the top of the list and save.</p>
<pre><code>&quot;cortex-debug.armToolchainPath&quot;: &quot;${env:VSARM}\\armcc\\bin\\&quot;,
</code></pre>

<p>For example my <code>settings.json</code> ends up looking like this:</p>
<pre><code class="json">{
    &quot;cortex-debug.armToolchainPath&quot;: &quot;${env:VSARM}\\armcc\\bin\\&quot;,
    &quot;terminal.integrated.rendererType&quot;: &quot;dom&quot;,
    &quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Program Files\\Git\\bin\\bash.exe&quot;,
    &quot;platformio-ide.forceUploadAndMonitor&quot;: true
}
</code></pre>

<blockquote>
<p>Note: The <code>${env:VSARM}</code> is refrencing an enviornment variable that we'll create shortly</p>
</blockquote>
<p>For the remaining tools I recommend installing them into into a single folder. On my Windows machine I use <code>C:\Tools</code>. You could also choose to use <code>C:\VSARM</code>. Keep it simple and avoid having spaces in the path. </p>
<p>On a Mac or Linux machine you could use:: <code>~/vsarm</code>. </p>
<p>Create an environment variable named <code>VSARM</code> and set its value to the <code>C:\Tools</code> (or <code>$HOME/vsarm</code>) folder.</p>
<h3 id="install-arm-gnu-toolchain">Install arm gnu toolchain</h3>
<p>Go to: <a href="https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads">https://developer.arm.com/tools-and-software/open-source-software/developer-tools/gnu-toolchain/gnu-rm/downloads</a>
Download the appropriate installer. There are several available. For my Windows development PC I chose:</p>
<pre><code>gcc-arm-none-eabi-8-2019-q3-update-win32-sha2.exe
Windows 32-bit Installer (Signed for Windows 7 and later)
MD5: d44f44b258b203bdd6808752907754be
</code></pre>

<p>Run the installer. When it prompts you to "Choose Install Location" I changed the default shown in "Destination Folder"
from:</p>
<pre><code>C:\Program Files (x86)\GNU Tools ARM Embedded\8 2019-q3-update
</code></pre>

<p>to </p>
<pre><code>C:\Tools\armcc
</code></pre>

<p>Make sure these gnu tools are in your path. More specifically you will want to add this to your path:</p>
<pre><code>C:\Tools\armcc\bin
</code></pre>

<h3 id="install-mingw-w64-for-windows-machines-only">Install MinGW-W64 (for Windows machines only)</h3>
<p>We need MinGW-W64 for the <code>mingw32-make.exe</code> program. If you have already have a <code>make</code> utility on your machine then you could skip this</p>
<p>Go to: <a href="https://sourceforge.net/projects/mingw-w64/">https://sourceforge.net/projects/mingw-w64/</a>
Change the install location to:</p>
<pre><code>C:\Tools\mingw
</code></pre>

<p>Make sure the MinGW-W64 tools are in your path. More specifically you will want to add this to your path:</p>
<pre><code>C:\Tools\mingw\mingw32\bin
</code></pre>

<h3 id="install-openocd">Install OpenOCD</h3>
<p>For Mac/Linux users (I believe) the OpenOCD project maintainers recommend you build it yourself using the latest version
of the source code available from the repository. An easier solution may be to obtain pre-built versions from: <a href="https://xpack.github.io/openocd/">https://xpack.github.io/openocd/</a></p>
<p>For Mac OS: the <code>README.md</code> file from <code>https://github.com/Marus/cortex-debug</code> mentions not using the default version of OpenOCD provided by Homebrew. Instead you may be able to build OpenOCD from source using Homebrew (<code>brew install open-ocd --HEAD</code>). </p>
<p>For Windows users I recommend obtaining a version of OpenOCD from here: <a href="https://gnutoolchains.com/arm-eabi/openocd/">https://gnutoolchains.com/arm-eabi/openocd/</a></p>
<p>Download the most recent 7zip file: <code>openocd-20190828.7z</code>
Decompress it into <code>C:\Tools</code> folder. Rename the resultant <code>OpenOCD-20190828-0.10.0</code> folder to just <code>OpenOCD</code>.</p>
<p>Make sure the OpenOCD tools are in your path. More specifically you will want to add this to your path:</p>
<pre><code>C:\Tools\OpenOCD\bin
</code></pre>

<blockquote>
<p>Note: There are several binary versions of OpenOCD available for installation. The one from SysProgs (gnutoolchains.com)
seems to be updated regularly and also provides drivers that may be helpful to you.</p>
</blockquote>
<h1 id="setup-visual-studio-code-project">Setup Visual Studio Code Project</h1>
<p>This git repo already contains the necessary configurations we need (see the various files in the <code>.vscode</code> folder). </p>
<p>Howver I'm going to document how I created these configs
so that future adjustments can be performed (such as adding additional source/include folders, etc).</p>
<p>Note: For more detailed information about these configs visit: </p>
<ul>
<li><a href="https://code.visualstudio.com/docs/editor/variables-reference">https://code.visualstudio.com/docs/editor/variables-reference</a></li>
<li><a href="https://code.visualstudio.com/docs/cpp/config-msvc">https://code.visualstudio.com/docs/cpp/config-msvc</a></li>
<li><a href="https://code.visualstudio.com/docs/cpp/c-cpp-properties-schema-reference">https://code.visualstudio.com/docs/cpp/c-cpp-properties-schema-reference</a></li>
</ul>
<h2 id="configure-ccpp">Configure C/CPP</h2>
<p>From within VSCode press <code>F1</code> key and type <code>edit config</code> and choose <code>C/CPP: Edit Configurations (JSON)</code>. The default contents of this file will look something like this:</p>
<pre><code class="json">{
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;Win32&quot;,
            &quot;includePath&quot;: [
                &quot;${workspaceFolder}/**&quot;
            ],
            &quot;defines&quot;: [
                &quot;_DEBUG&quot;,
                &quot;UNICODE&quot;,
                &quot;_UNICODE&quot;
            ],
            &quot;windowsSdkVersion&quot;: &quot;10.0.17763.0&quot;,
            &quot;compilerPath&quot;: &quot;C:/Program Files (x86)/Microsoft Visual Studio/2017/Community/VC/Tools/MSVC/14.16.27023/bin/Hostx64/x64/cl.exe&quot;,
            &quot;cStandard&quot;: &quot;c11&quot;,
            &quot;cppStandard&quot;: &quot;c++17&quot;,
            &quot;intelliSenseMode&quot;: &quot;msvc-x64&quot;
        }
    ],
    &quot;version&quot;: 4
}
</code></pre>

<p>Replace all of this and enter the following:</p>
<pre><code class="json">{
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;Debug&quot;,
            &quot;includePath&quot;: [
                &quot;${env:VSARM}/armcc/arm-none-eabi/include/c++/8.3.1&quot;,
                &quot;${env:VSARM}/armcc/arm-none-eabi/include/c++/8.3.1/arm-none-eabi&quot;,
                &quot;${env:VSARM}/armcc/arm-none-eabi/include/c++/8.3.1/backward&quot;,
                &quot;${env:VSARM}/armcc/lib/gcc/arm-none-eabi/8.3.1/include&quot;,
                &quot;${env:VSARM}/armcc/lib/gcc/arm-none-eabi/8.3.1/include-fixed&quot;,
                &quot;${env:VSARM}/armcc/arm-none-eabi/include&quot;,

                &quot;${workspaceFolder}/**&quot;
            ],
            &quot;defines&quot;: [
                &quot;DEBUG&quot;
            ],
            &quot;intelliSenseMode&quot;: &quot;clang-x64&quot;,
            &quot;browse&quot;: {
                &quot;path&quot;: [
                    &quot;${workspaceFolder}&quot;,
                    &quot;${env:VSARM}/armcc&quot;
                ],
                &quot;limitSymbolsToIncludedHeaders&quot;: false,
                &quot;databaseFilename&quot;: &quot;&quot;
            }
        }
    ],
    &quot;version&quot;: 4
}
</code></pre>

<p>Be sure to adjust the arm gnu folders such as: <code>${env:VSARM}/armcc/arm-none-eabi/include/c++/8.3.1</code> to match the version
you actually have installed (hint: the <code>8.3.1</code> might need to be changed).</p>
<p>For the <code>"includePath"</code> property you could replace the <code>"${workspaceFolder}/**"</code> wildcard with actual folders (like: <code>"${workspaceFolder}/include"</code>) if you wish.</p>
<p>For the <code>"defines"</code> property you should add any entries your project may require (examples: <code>"SOME_VALUE=0x8000"</code>, <code>"USE_SOMETHING"</code>, etc).</p>
<p>To create a "Release" configuration you could duplicate the above config, change the <code>"name"</code> property to <code>"Release"</code>, change the <code>"DEBUG"</code> define to <code>"NDEBUG"</code>, etc.</p>
<h2 id="configure-vscode-tasks">Configure VSCode Tasks</h2>
<p>From within VSCode press <code>F1</code> key and type <code>config task</code> and choose <code>Tasks: Configure tasks</code>. Click on <code>Create tasks.json file from template</code> and select the <code>Other</code> option. The <code>tasks.json</code> file will open. The default contents of this file will look something like this:</p>
<pre><code class="json">{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
        {
            &quot;label&quot;: &quot;echo&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;echo Hello&quot;
        }
    ]
}
</code></pre>

<p>Replace the contents of this file with the following:</p>
<pre><code class="json">{
    // See https://go.microsoft.com/fwlink/?LinkId=733558
    // for the documentation about the tasks.json format
    &quot;version&quot;: &quot;2.0.0&quot;,
    &quot;tasks&quot;: [
        {
            &quot;label&quot;: &quot;Clean Debug&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;make clean&quot;,
            &quot;windows&quot;: {
                &quot;command&quot;: &quot;mingw32-make clean&quot;,
            },
            &quot;options&quot;: {
                &quot;cwd&quot;: &quot;${workspaceRoot}/Debug&quot;
            }, 
            &quot;group&quot;: {
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
            },
            &quot;problemMatcher&quot;: []
        },
        {
            &quot;label&quot;: &quot;Clean Release&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;make clean&quot;,
            &quot;windows&quot;: {
                &quot;command&quot;: &quot;mingw32-make clean&quot;,
            },
            &quot;options&quot;: {
                &quot;cwd&quot;: &quot;${workspaceRoot}/Release&quot;
            }, 
            &quot;group&quot;: {
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
            },
            &quot;problemMatcher&quot;: []
        },
        {
            &quot;label&quot;: &quot;Make Debug Firmware&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;make -j8 all&quot;,
            &quot;windows&quot;: {
                &quot;command&quot;: &quot;mingw32-make -j8 all&quot;,
            },
            &quot;options&quot;: {
                &quot;cwd&quot;: &quot;${workspaceRoot}/Debug&quot;
            }, 
            &quot;group&quot;: {
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
            },
            &quot;problemMatcher&quot;: []
        },
        {
            &quot;label&quot;: &quot;Make Release Firmware&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;make -j8 all&quot;,
            &quot;windows&quot;: {
                &quot;command&quot;: &quot;mingw32-make -j8 all&quot;,
            },
            &quot;options&quot;: {
                &quot;cwd&quot;: &quot;${workspaceRoot}/Release&quot;
            }, 
            &quot;group&quot;: {
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
            },
            &quot;problemMatcher&quot;: []
        },
        {
            &quot;label&quot;: &quot;Load Debug Firmware&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;openocd -f interface/stlink.cfg -f target/klx.cfg -c \&quot;program i6.elf verify reset exit\&quot;&quot;,
            &quot;options&quot;: {
                &quot;cwd&quot;: &quot;${workspaceRoot}/Debug&quot;
            },
            &quot;group&quot;: {
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
            },
            &quot;problemMatcher&quot;: []
        },
        {
            &quot;label&quot;: &quot;Load Release Firmware&quot;,
            &quot;type&quot;: &quot;shell&quot;,
            &quot;command&quot;: &quot;openocd -f interface/stlink.cfg -f target/klx.cfg -c \&quot;program fs-i6.elf verify reset exit\&quot;&quot;,
            &quot;options&quot;: {
                &quot;cwd&quot;: &quot;${workspaceRoot}/Release&quot;
            },
            &quot;group&quot;: {
                &quot;kind&quot;: &quot;build&quot;,
                &quot;isDefault&quot;: true
            },
            &quot;problemMatcher&quot;: []
        }
    ]
}
</code></pre>

<blockquote>
<p>Note: Be sure to adjust the <code>-j</code> parameter to the <code>make</code> if needed.</p>
</blockquote>
<p>To run any of these tasks you can use <code>Ctrl-Alt-T</code> to bring up a menu that allows you to choose any of these tasks we've just defined. Alternatively you can use <code>F1</code> key and type <code>run task</code> and choose <code>Tasks: Run Task</code>.</p>
<h2 id="configure-vscode-shell">Configure VSCode shell</h2>
<p><strong>One very important note:</strong> The makefile I'm using uses <code>rm -rf</code> as part of building the <code>clean</code> target. This <code>rm</code> command isn't normally available on windows. So I've configured my VSCode environment to use a <code>bash</code> shell whenever it needs to provide a shell for any command.</p>
<p>This <code>bash</code> shell came with my <a href="https://gitforwindows.org/">Git for Windows</a> installation. If you have something similar, then you'll want to configure VSCode to use such a shell. Alternatively you can edit the makefile(s) in this project folder.</p>
<p>To configure VSCode to use a particular shell you need to edit your <code>settings.json</code> file. Details are provided here: <a href="https://code.visualstudio.com/docs/editor/integrated-terminal">https://code.visualstudio.com/docs/editor/integrated-terminal</a>. </p>
<p>Basically you need to enter a configuration line like <strong><em>one</em></strong> of the following:</p>
<pre><code class="json">// Command Prompt
&quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Windows\\System32\\cmd.exe&quot;
// PowerShell
&quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\powershell.exe&quot;
// Git Bash
&quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Program Files\\Git\\bin\\bash.exe&quot;
// Bash on Ubuntu (on Windows)
&quot;terminal.integrated.shell.windows&quot;: &quot;C:\\Windows\\System32\\bash.exe&quot;
</code></pre>

<p>Obviously you should use one of the <code>bash</code> options in the above examples. Personally I prefer the <code>bash</code> from my <code>git</code> install versus the one from my Windows Subsystem for Linux (WSL) since it loads up much faster.</p>
<h2 id="configure-debugger">Configure Debugger</h2>
<p>From within VSCode use <code>F1</code> key, type <code>launch</code> and select <code>Debug: Open launch.json</code> and choose the <code>Cortex Debug</code> option. The <code>launch.json</code> file will open with contents that should look something like this:</p>
<pre><code class="json">{
    // Use IntelliSense to learn about possible attributes.
    // Hover to view descriptions of existing attributes.
    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;Cortex Debug&quot;,
            &quot;cwd&quot;: &quot;${workspaceRoot}&quot;,
            &quot;executable&quot;: &quot;./bin/executable.elf&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;type&quot;: &quot;cortex-debug&quot;,
            &quot;servertype&quot;: &quot;jlink&quot;
        }
    ]
}
</code></pre>

<p>Replace it with this:</p>
<pre><code class="json">{
    &quot;version&quot;: &quot;0.2.0&quot;,
    &quot;configurations&quot;: [
        {
            &quot;name&quot;: &quot;Launch Debug config&quot;,
            &quot;type&quot;: &quot;cortex-debug&quot;,
            &quot;request&quot;: &quot;launch&quot;,
            &quot;servertype&quot;: &quot;openocd&quot;,
            &quot;cwd&quot;: &quot;${workspaceRoot}&quot;,
            &quot;executable&quot;: &quot;./Debug/i6.elf&quot;,
            &quot;device&quot;: &quot;Kinetis&quot;,
            &quot;configFiles&quot;: [
                &quot;interface/stlink.cfg&quot;,
                &quot;target/klx.cfg&quot;,
            ]
        },
        {
            &quot;name&quot;: &quot;Attach Debug config&quot;,
            &quot;type&quot;: &quot;cortex-debug&quot;,
            &quot;request&quot;: &quot;attach&quot;,
            &quot;servertype&quot;: &quot;openocd&quot;,
            &quot;cwd&quot;: &quot;${workspaceRoot}&quot;,
            &quot;executable&quot;: &quot;./Debug/i6.elf&quot;,
            &quot;device&quot;: &quot;Kinetis&quot;,
            &quot;configFiles&quot;: [
                &quot;interface/stlink.cfg&quot;,
                &quot;target/klx.cfg&quot;,
            ]
        }
    ]
}
</code></pre>

<p>Some useful info about these configs can be found here: <a href="https://marcelball.ca/projects/cortex-debug/cortex-debug-launch-configurations/">https://marcelball.ca/projects/cortex-debug/cortex-debug-launch-configurations/</a></p>
<p>After these additions have been made you can click on the Debug icon on the left of VSCode and be able to execute one of these configurations. </p>
<h3 id="semihosting">"semihosting"</h3>
<p>It is possible to direct <code>printf</code> messages (<code>stdout</code>) to the debug interface. This capability is known as <em>semihosting</em>.</p>
<blockquote>
<p>Note: I discovered this via Google and reading about this: <a href="https://dzone.com/articles/semihosting-gnu-arm-embedded">https://dzone.com/articles/semihosting-gnu-arm-embedded</a> and also <a href="https://bgamari.github.io/posts/2014-10-31-semihosting.html">https://bgamari.github.io/posts/2014-10-31-semihosting.html</a></p>
</blockquote>
<p>I have not yet attempted using this feature but will investigate this soon.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href=".." title="Home" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Home
              </span>
            </div>
          </a>
        
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.c648116f.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>